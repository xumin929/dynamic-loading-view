{"version":3,"sources":["webpack:///./src/components-react/UploadFile/v1.0.0/view/index.js","webpack:///./src/components-react/UploadImage/v1.0.0/view/index.js","webpack:///./src/components-react/UploadImage/v1.0.0/view/UploadImage.js","webpack:///./src/components-react/ReleaseSaleInfo/v1.0.0/view/index.js","webpack:///./src/components-react/ReleaseSaleInfo/v1.0.0/view/ReleaseSaleInfo.js","webpack:///./src/components-react/ReleaseSaleInfo/v1.0.0/view/redux-SkuUnit.js","webpack:///./src/components-react/ReleaseSaleInfo/v1.0.0/view/BindReleaseSaleInfo.js"],"names":["l","u","__webpack_require__","__esModule","default","t","e","exports","1245","a","Object","defineProperty","value","1268","1269","h","n","i","d","r","o","s","_react","f","c","_message3","config","top","duration","uploadFlag","UploadImg","props","context","_classCallCheck3","this","_this","_possibleConstructorReturn3","__proto__","_getPrototypeOf2","call","beforeUpload","file","maxFileSize","fileSizeType","imgTypes","imgType","isLt2M","isImgTypes","fileName","name","length","fileTypes","split","type","toUpperCase","map","types","index","indexOf","size","parseInt","error","handleChange","info","status","loading","response","code","picture","data","setState","imageUrl","attr","relation","onChange","obj","msg","onRemove","url","state","nextProps","key","style","action","wrapClassName","className","_react2","createElement","class","src","_upload2","showUploadList","bind","onClick","_icon2","Component","1439","1440","U","m","p","v","g","k","S","C","_components","E","y","RadioGroup","_radio2","Group","ReleaseSaleInfo","_initialiseProps","defaultDataSource","attributes","skuStatus","columns","initColumns","itemTmplPublishVo","JSON","parse","_stringify2","dataSource","itemTmplSkuVoList","setDataSourceKey","skuUnitDS","wholeColumnData","selectedRowKeys","cid","new_cid","skuUnit","querySkuUnit","_this2","rowSelection","onSelectChange","_button2","handleCheckAll","handleReverseCheck","handleMultiEnablOrDisabled","_table2","pagination","scroll","x","new_dataSource","forEach","item","push","_extends3","_this3","allRowKeys","_state","new_selectedRowKeys","filter","includes","rowkeys","updateItemTmplAction","handleSingleDataChange","field","weight","handleWholeColumnChange","fields","storeWholeInputData","preState","onRemoveFile","console","log","title","dataIndex","width","render","vName","modelCode","content","_input2","target","href","_popover2","record","disabled","productCode","_inputNumber2","min","defaultValue","colSpan","unit","_select2","Option","extendColumnFields","Array","label","labelName","newValue","UploadSelect","result","limit","suffix","imgUrl","showRemoveIcon","_view2","logoUrl","fileList","_view4","fileLength","fileType","that","newData","arguments","skuUnit_loaded","SKUUNIT_LOAD","skuUnit_loading","SKUUNIT_LOAD_SUCCESS","SKUUNIT_LOAD_FAIL","skuUnit_error","params","promise","client","get","1442","_reactRedux","_reduxSkuUnit","BindReleaseSaleInfo","_inject2","connect","store"],"mappings":"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","file":"15-167e9b631355aff8c98a.js","sourcesContent":["import UploadFile from './UploadFile';\r\nexport default UploadFile;","import UploadImage from './UploadImage';\r\nexport default UploadImage;","/**\r\n * shop 上传图片，携带重新上传和删除按钮\r\n */\r\nimport React, { Component } from 'react';\r\nimport {message,Upload,Icon} from 'jdcloudui';\r\nimport './style/index.css';\r\nmessage.config({\r\n  top: 300,\r\n  duration: 2,\r\n});\r\nlet uploadFlag = true;\r\nfunction getBase64(img, callback,imageUrl) {\r\n  const reader = new FileReader();\r\n  if(imageUrl && imageUrl!=''){\r\n    reader.addEventListener('load', () => callback(imageUrl));\r\n    //reader.readAsDataURL(imageUrl);\r\n  }else{\r\n    reader.addEventListener('load', () => callback(reader.result));\r\n    reader.readAsDataURL(img);\r\n  }\r\n}\r\nexport default class UploadImg extends Component {\r\n  constructor(props, context) {\r\n    super(props, context);\r\n    this.state={\r\n      imageUrl: props.imageUrl || ''\r\n    };\r\n  }\r\n  componentWillReceiveProps(nextProps){\r\n    this.setState({\r\n      imageUrl: nextProps.imageUrl || ''\r\n    });\r\n  }\r\n  beforeUpload =(file)=>{\r\n    const maxFileSize = this.props.maxFileSize;\r\n    let fileSizeType = this.props.fileSizeType;\r\n    let imgTypes = this.props.imgType;\r\n    var isLt2M = true,isImgTypes=true;\r\n    var fileName = file.name;\r\n    //var validate= file.type === 'image/jpeg';\r\n    if(imgTypes && imgTypes.length>0){\r\n      var fileTypes=fileName.split('.');\r\n      var type = fileTypes[fileTypes.length-1];\r\n      type = type.toUpperCase();\r\n      imgTypes = imgTypes.map((types,index)=>{\r\n        return types.toUpperCase();\r\n      });\r\n      if(imgTypes.indexOf(type)=== -1){//文件类型不在用户指定的范围内\r\n        isImgTypes =false;\r\n      }\r\n    }\r\n    if(maxFileSize && file.size){\r\n      if(fileSizeType && (fileSizeType.toUpperCase()=='M' ||\r\n        fileSizeType.toUpperCase()=='MB')){\r\n        isLt2M = file.size <= parseInt(maxFileSize)*1024*1024;\r\n      }else if(fileSizeType && fileSizeType.toUpperCase()=='KB'){\r\n        isLt2M = file.size <= parseInt(maxFileSize)*1024;\r\n      }else if(fileSizeType && fileSizeType.toUpperCase()=='B'){\r\n        isLt2M = file.size <= parseInt(maxFileSize);\r\n      }else{\r\n        isLt2M = file.size <= parseInt(maxFileSize)*1024*1024;//默认fileSizeType=='M'\r\n      }\r\n    }\r\n    if(!isImgTypes){\r\n      message.error('上传图片的文件格式有误!');\r\n      return false;\r\n    }\r\n    if (!isLt2M) {\r\n      if(!fileSizeType){\r\n        fileSizeType ='M';\r\n      }\r\n      message.error('上传图片的文件大小必须小于'+maxFileSize+fileSizeType+'!');\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n  handleChange = (info) => {\r\n    if(info.file.status === 'uploading'){\r\n      if(uploadFlag){\r\n        message.loading('正在上传中，请稍等....',1);\r\n      }\r\n      uploadFlag = false;\r\n    }\r\n    if (info.file.status === 'done') {\r\n      uploadFlag = true;\r\n      var response=info.file.response;\r\n      if(response && response.code=='0'){\r\n        var picture = response.data;\r\n        this.setState({imageUrl:picture});\r\n        var attr = this.props.relation;\r\n        let {onChange} = this.props;\r\n        var obj={};\r\n        obj[attr]= picture;\r\n        onChange(obj);\r\n        //getBase64(info.file.originFileObj, imageUrl => this.setState({ imageUrl }),picture.pictureURL);\r\n      }else{\r\n        if(response && response.code=='-1'){\r\n          message.error(response.msg)\r\n        }else{\r\n          message.error(\"上传失败！\");\r\n        }\r\n        let {onChange} = this.props;\r\n        var obj={};\r\n        onChange(obj);\r\n      }\r\n    }\r\n    if (info.file.status === 'error') {\r\n      uploadFlag = true;\r\n      message.error(\"上传失败！\")\r\n    }\r\n  }\r\n  \r\n  //移除\r\n  onRemove = ()=>{\r\n    //更新图片\r\n    if(this.props.onRemove && typeof this.props.onRemove=='function'){\r\n      this.props.onRemove({url: this.state.imageUrl});\r\n    }\r\n    this.setState({\r\n      imageUrl: undefined\r\n    });\r\n  }\r\n\r\n  render(){\r\n    //const styles = require('./style/UploadImg.less');\r\n    let style = this.props.style || {};\r\n    const action = this.props.action;\r\n    const data =this.props.data;\r\n    const name = this.props.name;\r\n    let imageUrl = this.state.imageUrl || '';\r\n\r\n    let wrapClassName = 'upload-select-wrap ' + (this.props.className || '');\r\n    if(imageUrl && imageUrl.length>0){\r\n      wrapClassName += ' solid-border';\r\n    }\r\n    return(\r\n      <div className={wrapClassName} style={style}>\r\n        {\r\n          imageUrl && imageUrl!='' ?\r\n          <div class=\"upload-select-box\">\r\n            <img src={imageUrl} />\r\n            <div class=\"upload-select-footer\">\r\n              <Upload\r\n                name={name}\r\n                showUploadList={false}\r\n                action={action}\r\n                beforeUpload={this.beforeUpload.bind(this)}\r\n                onChange={this.handleChange.bind(this)}\r\n                data={data}\r\n              >\r\n                <div class=\"upload-select-btn\">重新上传</div>\r\n              </Upload>\r\n              <div class=\"upload-select-removebtn\" onClick={this.onRemove}>删除</div>\r\n            </div>\r\n          </div>\r\n          :\r\n            <Upload\r\n              name={name}\r\n              showUploadList={false}\r\n              action={action}\r\n              beforeUpload={this.beforeUpload.bind(this)}\r\n              onChange={this.handleChange.bind(this)}\r\n              data={data}\r\n            >\r\n              <div className='upload-select-defaultbtn'>\r\n                <Icon type=\"plus\" className='upload-plus' /> <br/>上传图片\r\n              </div>\r\n            </Upload>\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n  \r\n}","import BindReleaseSaleInfo from './BindReleaseSaleInfo';\r\nexport default BindReleaseSaleInfo;","/**\r\n * @author chenyanhua\r\n * @date 2018-07-26\r\n * @file 销售信息组件\r\n * 逻辑：根据销售规格选中的属性合成该列表数据\r\n * 该页面涉及到用户自定义列\r\n */\r\nimport React, { Component } from 'react';\r\nimport { Table, Button, Input, InputNumber, Select, Popover, Radio } from 'jdcloudui';\r\nimport { UploadSelect } from 'jdcloudecc/components';\r\nimport UploadImage from '../../../UploadImage/v1.0.0/view';\r\nimport UploadFile from '../../../UploadFile/v1.0.0/view';\r\nimport './style/index.css';\r\n\r\nconst RadioGroup = Radio.Group;\r\n\r\nexport default class ReleaseSaleInfo extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    // 默认表格\r\n    this.defaultDataSource = [{\r\n      \"key\": 0,\r\n      \"attributes\": null, //销售属性[{\"aName\":\"颜值\",\"aid\":\"17504\",\"desc\":\"\",\"vName\":\"10\",\"vid\":\"33066\"}]\r\n      \"skuStatus\": 1 //停用启用操作(必选，默认启用) sku 状态,1:启用;0:停用\r\n    }];\r\n    const columns = this.initColumns(props);\r\n    const itemTmplPublishVo = JSON.parse(JSON.stringify(props.itemTmplPublishVo || {})); // 总数据源\r\n    var dataSource = JSON.parse(JSON.stringify(itemTmplPublishVo.itemTmplSkuVoList || []));\r\n    dataSource = this.setDataSourceKey(dataSource);\r\n    this.state = {\r\n      skuUnitDS: props.skuUnitDS.data || [], // 单位数据源\r\n      wholeColumnData: {}, // 存储当前对应列的全部设置input框数据，例如 { barCode: 54, field: value }\r\n      columns: columns, // 表格列\r\n      dataSource: dataSource.length > 0 ? dataSource : this.defaultDataSource, // 表格数据\r\n      selectedRowKeys: [] // 表格选中行\r\n    };\r\n    this.cid = itemTmplPublishVo.cid || undefined;\r\n  }\r\n  componentWillReceiveProps(nextProps) {\r\n    // 需要展示单位列 && 不是店铺 && 平台分类存在且已经变更，重新加载单位数据源\r\n    const new_cid =  nextProps.itemTmplPublishVo &&  nextProps.itemTmplPublishVo.cid || undefined;\r\n    const type =  this.props.type || undefined;\r\n    if(nextProps.skuUnit && nextProps.type != '3' && new_cid && this.cid != new_cid){\r\n      this.cid = new_cid;\r\n      nextProps.querySkuUnit({ cid: nextProps.itemTmplPublishVo.cid }, type);\r\n    }\r\n\r\n    // 表格数据\r\n    const columns = this.initColumns(nextProps);\r\n    const itemTmplPublishVo = JSON.parse(JSON.stringify(nextProps.itemTmplPublishVo || {})); // 总数据源\r\n    var dataSource = JSON.parse(JSON.stringify(itemTmplPublishVo.itemTmplSkuVoList || []));\r\n    dataSource = this.setDataSourceKey(dataSource);\r\n    this.setState({\r\n      skuUnitDS: nextProps.skuUnitDS.data || [], // 单位数据源\r\n      columns: columns,\r\n      dataSource: dataSource.length > 0 ? dataSource : this.defaultDataSource\r\n    });\r\n\r\n  }\r\n  componentDidMount(){\r\n    // 需要展示单位列 && 不是店铺 && 平台分类存在，加载单位数据源\r\n    const cid =  this.props.itemTmplPublishVo &&  this.props.itemTmplPublishVo.cid || undefined;\r\n    const type =  this.props.type || undefined;\r\n    if(this.props.skuUnit && this.props.type != '3' && cid ){\r\n      this.props.querySkuUnit({ cid: this.props.itemTmplPublishVo.cid }, type);\r\n    }\r\n  }\r\n  // 为dataSource增加key\r\n  setDataSourceKey = (dataSource) => {\r\n    let new_dataSource = [];\r\n    dataSource.forEach((item, index) => {\r\n      new_dataSource.push({\r\n        ...item,\r\n        key: index\r\n      });\r\n    });\r\n    return new_dataSource;\r\n  }\r\n  // 表格checkbox变化，更新选中行数据源\r\n  onSelectChange = (selectedRowKeys) => {\r\n    this.setState({ selectedRowKeys });\r\n  }\r\n  render() {\r\n    const rowSelection = {\r\n      selectedRowKeys: this.state.selectedRowKeys,\r\n      onChange: this.onSelectChange\r\n    };\r\n    return (\r\n      [\r\n        <h3 className='h3-title'>销售信息</h3>,\r\n        <div className='btn-group-horizontal'>\r\n          <Button onClick={this.handleCheckAll}>全选</Button>\r\n          <Button onClick={this.handleReverseCheck}>反选</Button>\r\n          <Button onClick={() => { this.handleMultiEnablOrDisabled(0); }}>批量停用</Button>\r\n          <Button onClick={() => { this.handleMultiEnablOrDisabled(1); }} >批量启用</Button>\r\n        </div>,\r\n        <div className='table-bordered'>\r\n          <Table\r\n            rowSelection={rowSelection}\r\n            columns={this.state.columns}\r\n            dataSource={this.state.dataSource}\r\n            pagination={false}\r\n            scroll={{ x: true, y: 400 }}\r\n          />\r\n        </div>\r\n      ]\r\n    );\r\n  }\r\n  /**\r\n   * 全选按钮事件，获取所有的key，更新state\r\n   */\r\n  handleCheckAll = () => {\r\n    const { dataSource } = this.state;\r\n    let allRowKeys = [];\r\n    for (let i = 0; i < dataSource.length; i++) {\r\n      allRowKeys.push(i);\r\n    }\r\n    this.setState({\r\n      selectedRowKeys: allRowKeys\r\n    });\r\n  }\r\n  /**\r\n   * 反选按钮事件，反选 key，更新state\r\n   */\r\n  handleReverseCheck = () => {\r\n    const { dataSource, selectedRowKeys } = this.state;\r\n    var allRowKeys = [];\r\n    for (var i = 0; i < dataSource.length; i++) {\r\n      allRowKeys.push(i);\r\n    }\r\n    let new_selectedRowKeys = allRowKeys.filter(v => !selectedRowKeys.includes(v));\r\n    this.setState({\r\n      selectedRowKeys: new_selectedRowKeys\r\n    });\r\n  }\r\n  /**\r\n   * 批量停用/启用按钮\r\n   * @param skuStatus: 0-停用，1-启用\r\n   */\r\n  handleMultiEnablOrDisabled = (skuStatus) => {\r\n    const { selectedRowKeys } = this.state;\r\n    const dataSource = JSON.parse(JSON.stringify(this.state.dataSource));\r\n    selectedRowKeys.forEach((rowkeys) => {\r\n      dataSource[rowkeys].skuStatus = skuStatus;\r\n    });\r\n\r\n    // 更新总数据源\r\n    var itemTmplPublishVo = JSON.parse(JSON.stringify(this.props.itemTmplPublishVo));\r\n    itemTmplPublishVo.itemTmplSkuVoList = dataSource;\r\n    this.props.updateItemTmplAction(itemTmplPublishVo);\r\n  }\r\n  /**\r\n   * td里 input text类型，更新总数据源\r\n   * @param value 改变的值\r\n   * @param field 改变的字段\r\n   * @param key 当前操作数据行\r\n   */\r\n  handleSingleDataChange = (value, field, key) => {\r\n    var dataSource = JSON.parse(JSON.stringify(this.state.dataSource));\r\n    dataSource[key][field] = value;\r\n\r\n    // 当是变换单位字段时，weight字段需要根据单位进行换算\r\n    if (field == 'weightUnit') {\r\n      const weight = dataSource[key]['weight'];\r\n      if (value == 'g') {\r\n        dataSource[key]['weight'] = weight * 1000;\r\n      } else if (value = 'kg') {\r\n        dataSource[key]['weight'] = weight / 1000;\r\n      }\r\n    }\r\n\r\n    // 更新总数据源\r\n    var itemTmplPublishVo = JSON.parse(JSON.stringify(this.props.itemTmplPublishVo));\r\n    itemTmplPublishVo.itemTmplSkuVoList = dataSource;\r\n    this.props.updateItemTmplAction(itemTmplPublishVo);\r\n  }\r\n\r\n  /**\r\n   * 列头部input text，设置按钮 click，更新总数据源\r\n   * @param fields 改变的字段 [string]\r\n   */\r\n  handleWholeColumnChange = (fields) => {\r\n    var dataSource = JSON.parse(JSON.stringify(this.state.dataSource));\r\n\r\n    fields.forEach((field) => {\r\n      const value = this.state.wholeColumnData[field];\r\n      // 数据存在\r\n      if (typeof value == 'string' || typeof value == 'number') {\r\n        // 更改所有数据\r\n        dataSource.forEach((item) => {\r\n          // 处于启用状态的数据才可进行重新赋值，停用状态的数据不可赋值\r\n          if (item.skuStatus == '1') {\r\n            item[field] = value;\r\n          }\r\n        });\r\n      }\r\n    });\r\n\r\n    // 更新总数据源\r\n    var itemTmplPublishVo = JSON.parse(JSON.stringify(this.props.itemTmplPublishVo));\r\n    itemTmplPublishVo.itemTmplSkuVoList = dataSource;\r\n    this.props.updateItemTmplAction(itemTmplPublishVo);\r\n  }\r\n\r\n  /**\r\n   * 列头部 input text，onChange时保存变化的数据到state中\r\n   * @param e: input对象\r\n   * @param field:改变的字段\r\n   */\r\n  storeWholeInputData = (value, field) => {\r\n    this.setState((preState) => {\r\n      let wholeColumnData = JSON.parse(JSON.stringify(preState.wholeColumnData));\r\n      wholeColumnData[field] = value;\r\n      return {\r\n        wholeColumnData: wholeColumnData\r\n      };\r\n    });\r\n  }\r\n\r\n  // 删除附件\r\n  onRemoveFile = (file)=> {\r\n    console.log('file-----',file);\r\n  }\r\n  /**\r\n   * 根据config配置信息，确定表格由哪些列组成\r\n   * @return columns\r\n   */\r\n  initColumns = (props) => {\r\n    let columns = [{\r\n      title: '商品信息',\r\n      dataIndex: 'attributes',\r\n      key: 'attributes',\r\n      width: 200,\r\n      render: (data) => {\r\n        var context = '';\r\n        (data || []).forEach((item) => {\r\n          context += item.vName + ' ';\r\n        });\r\n        return (<span>{context}</span>);\r\n      }\r\n    }];\r\n    // 商品型号\r\n    if (props.modelCode) {\r\n      const content = (\r\n        <div>\r\n          <label>型号</label>\r\n          <Input\r\n            className='inline-input'\r\n            onChange={(e) => { this.storeWholeInputData(e.target.value, \"modelCode\"); }}\r\n          />\r\n          <a\r\n            href='javascript:void(0)'\r\n            className='a-link'\r\n            onClick={() => { this.handleWholeColumnChange(['modelCode']); }}\r\n          >设置</a>\r\n        </div>\r\n      );\r\n      const title = (\r\n        <div>\r\n          <label className='inline-label'>型号</label>\r\n          <Popover content={content}>\r\n            <a href='javascript:void(0)' className='a-link'>设置全部</a>\r\n          </Popover>\r\n        </div>\r\n      );\r\n      columns.push({\r\n        title: title,\r\n        dataIndex: 'modelCode',\r\n        key: 'modelCode',\r\n        width: 150,\r\n        render: (data, record) => {\r\n          return (\r\n            <Input\r\n              value={data}\r\n              disabled={record.skuStatus == '0' ? true : false}\r\n              onChange={(e) => { this.handleSingleDataChange(e.target.value, \"modelCode\", record.key); }}\r\n            />\r\n          );\r\n        }\r\n      });\r\n    }\r\n\r\n    // 商品物料号\r\n    if (props.productCode) {\r\n      const content = (\r\n        <div>\r\n          <label>物料号</label>\r\n          <Input\r\n            className='inline-input'\r\n            onChange={(e) => { this.storeWholeInputData(e.target.value, \"productCode\"); }}\r\n          />\r\n          <a href='javascript:void(0)'\r\n            className='a-link'\r\n            onClick={() => { this.handleWholeColumnChange(['productCode']); }}\r\n          >设置</a>\r\n        </div>\r\n      );\r\n      const title = (\r\n        <div>\r\n          <label className='inline-label'>物料号</label>\r\n          <Popover content={content}>\r\n            <a href='javascript:void(0)' className='a-link'>设置全部</a>\r\n          </Popover>\r\n        </div>\r\n      );\r\n      columns.push({\r\n        title: title,\r\n        dataIndex: 'productCode',\r\n        key: 'productCode',\r\n        width: 150,\r\n        render: (data, record) => {\r\n          return (\r\n            <Input\r\n              value={data}\r\n              disabled={record.skuStatus == '0' ? true : false}\r\n              onChange={(e) => { this.handleSingleDataChange(e.target.value, \"productCode\", record.key); }}\r\n            />\r\n          );\r\n        }\r\n      });\r\n    }\r\n\r\n    // 商品条形码\r\n    if (props.modelCode) {\r\n      const content = (\r\n        <div>\r\n          <label>商品条码</label>\r\n          <Input\r\n            className='inline-input'\r\n            onChange={(e) => { this.storeWholeInputData(e.target.value, \"barCode\"); }}\r\n          />\r\n          <a\r\n            href='javascript:void(0)'\r\n            className='a-link'\r\n            onClick={() => { this.handleWholeColumnChange(['barCode']); }}\r\n          >设置</a>\r\n        </div>\r\n      );\r\n      const title = (\r\n        <div>\r\n          <label className='inline-label'>商品条码</label>\r\n          <Popover content={content}>\r\n            <a href='javascript:void(0)' className='a-link'>设置全部</a>\r\n          </Popover>\r\n        </div>\r\n      );\r\n      columns.push({\r\n        title: title,\r\n        dataIndex: 'barCode',\r\n        key: 'barCode',\r\n        width: 150,\r\n        render: (data, record) => {\r\n          return (\r\n            <Input\r\n              value={data}\r\n              disabled={record.skuStatus == '0' ? true : false}\r\n              onChange={(e) => { this.handleSingleDataChange(e.target.value, \"barCode\", record.key); }}\r\n            />\r\n          );\r\n        }\r\n      });\r\n    }\r\n\r\n    // 商品毛重\r\n    if (props.modelCode) {\r\n      const content = (\r\n        <div>\r\n          <label>商品毛重</label>\r\n          <InputNumber\r\n            min={0}\r\n            className='inline-input-number'\r\n            onChange={(value) => { this.storeWholeInputData(value, \"weight\"); }}\r\n          />\r\n          <RadioGroup\r\n            defaultValue='g'\r\n            onChange={(e) => { this.storeWholeInputData(e.target.value, \"weightUnit\"); }}\r\n          >\r\n            <Radio value='g'>g</Radio>\r\n            <Radio value='kg'>kg</Radio>\r\n          </RadioGroup>\r\n          <a\r\n            href='javascript:void(0)'\r\n            className='a-link'\r\n            onClick={() => {\r\n              this.handleWholeColumnChange(['weight', 'weightUnit']);\r\n            }}\r\n          >设置</a>\r\n        </div>\r\n      );\r\n      const title = (\r\n        <div>\r\n          <label className='inline-label'>商品毛重</label>\r\n          <Popover content={content}>\r\n            <a href='javascript:void(0)' className='a-link'>设置全部</a>\r\n          </Popover>\r\n        </div>\r\n      );\r\n      columns.push({\r\n        title: title,\r\n        dataIndex: 'weight',\r\n        key: 'weight',\r\n        colSpan: 2,\r\n        width: 90,\r\n        render: (data, record) => {\r\n          return (\r\n            <InputNumber\r\n              min={0}\r\n              value={data}\r\n              disabled={record.skuStatus == '0' ? true : false}\r\n              className='inline-input-number'\r\n              onChange={(value) => { this.handleSingleDataChange(value, \"weight\", record.key); }}\r\n            />\r\n          );\r\n        }\r\n      });\r\n      columns.push({\r\n        title: '',\r\n        dataIndex: 'weightUnit',\r\n        key: 'weightUnit',\r\n        colSpan: 0,\r\n        width: 70,\r\n        render: (data, record) => {\r\n          var unit = data ? data : 'g';\r\n          return (\r\n            <Select\r\n              value={unit}\r\n              disabled={record.skuStatus == '0' ? true : false}\r\n              onChange={(value) => { this.handleSingleDataChange(value, \"weightUnit\", record.key); }}\r\n            >\r\n              <Select.Option value=\"g\">g</Select.Option>\r\n              <Select.Option value=\"kg\">kg</Select.Option>\r\n            </Select>\r\n          );\r\n        }\r\n      });\r\n    }\r\n\r\n    // 包装尺寸\r\n    if (props.size) {\r\n      const content = (\r\n        <div>\r\n          <label>包装尺寸（mm） </label>\r\n          &nbsp;&nbsp;长:\r\n          <InputNumber\r\n            min={0}\r\n            className='inline-input-number'\r\n            onChange={(value) => { this.storeWholeInputData(value, \"length\"); }}\r\n          />\r\n          &nbsp;&nbsp;宽:\r\n          <InputNumber\r\n            min={0}\r\n            className='inline-input-number'\r\n            onChange={(value) => { this.storeWholeInputData(value, \"width\"); }}\r\n          />\r\n          &nbsp;&nbsp;高:\r\n          <InputNumber\r\n            min={0}\r\n            className='inline-input-number'\r\n            onChange={(value) => { this.storeWholeInputData(value, \"height\"); }}\r\n          />\r\n          <a\r\n            href='javascript:void(0)'\r\n            className='a-link'\r\n            onClick={() => {\r\n              this.handleWholeColumnChange(['length', 'width', 'height']);\r\n            }}\r\n          >设置</a>\r\n        </div>\r\n      );\r\n      const title = (\r\n        <div>\r\n          <label className='inline-label'>包装尺寸（mm）</label>\r\n          <Popover content={content}>\r\n            <a href='javascript:void(0)' className='a-link'>设置全部</a>\r\n          </Popover>\r\n        </div>\r\n      );\r\n      columns.push({\r\n        title: title,\r\n        dataIndex: 'length',\r\n        key: 'length',\r\n        colSpan: 3,\r\n        width: 110,\r\n        render: (data, record) => {\r\n          return (\r\n            <div>\r\n              长:\r\n              <InputNumber\r\n                min={0}\r\n                value={data}\r\n                disabled={record.skuStatus == '0' ? true : false}\r\n                className='inline-input-number'\r\n                onChange={(value) => { this.handleSingleDataChange(value, \"length\", record.key); }}\r\n              />\r\n            </div>\r\n          );\r\n        }\r\n      });\r\n      columns.push({\r\n        dataIndex: 'width',\r\n        key: 'width',\r\n        colSpan: 0,\r\n        width: 110,\r\n        render: (data, record) => {\r\n          return (\r\n            <div>\r\n              宽:\r\n              <InputNumber\r\n                min={0}\r\n                value={data}\r\n                disabled={record.skuStatus == '0' ? true : false}\r\n                className='inline-input-number'\r\n                onChange={(value) => { this.handleSingleDataChange(value, \"width\", record.key); }}\r\n              />\r\n            </div>\r\n          );\r\n        }\r\n      });\r\n      columns.push({\r\n        dataIndex: 'height',\r\n        key: 'height',\r\n        colSpan: 0,\r\n        width: 110,\r\n        render: (data, record) => {\r\n          return (\r\n            <div>\r\n              高:\r\n              <InputNumber\r\n                min={0}\r\n                value={data}\r\n                disabled={record.skuStatus == '0' ? true : false}\r\n                className='inline-input-number'\r\n                onChange={(value) => { this.handleSingleDataChange(value, \"height\", record.key); }}\r\n              />\r\n            </div>\r\n          );\r\n        }\r\n      });\r\n    }\r\n    /**\r\n     * 自定义扩展列，从config页面配置\r\n     * props.extendColumnFields = [{ id:1, key:'中文名1', type:'图片|file|input', width: *** }]\r\n     */\r\n    if (props.extendColumnFields && props.extendColumnFields instanceof Array && props.extendColumnFields.length > 0) {\r\n      props.extendColumnFields.forEach((item) => {\r\n        let label = `extendSkuFields_${item.label}`;\r\n        columns.push({\r\n          title: item.labelName,\r\n          dataIndex: label,\r\n          key: label,\r\n          width: item.width || 120,\r\n          render: (data, record) => {\r\n            if (item.type == 'input') {\r\n              return (\r\n                <Input\r\n                  value={data && data.value || ''}\r\n                  disabled={record.skuStatus == '0' ? true : false}\r\n                  onChange={(e) => {\r\n                    let newValue = {\r\n                      label: item.label,\r\n                      value: e.target.value\r\n                    };\r\n                    this.handleSingleDataChange(newValue, label, record.key);\r\n                  }}\r\n                />\r\n              );\r\n            } else if (item.type == 'image') {\r\n              if (props.type == '0' || props.type == '1') { // platform\r\n                return (\r\n                  <div className={record.skuStatus=='0'?'image-diabled':''}>\r\n                    <UploadSelect\r\n                      onChange={(result) => {\r\n                        let newValue = {\r\n                          label: item.label,\r\n                          value: result.url || ''\r\n                        };\r\n                        this.handleSingleDataChange(newValue, label, record.key)\r\n                      }}\r\n                      onRemove={(result) => {\r\n                        let newValue = {\r\n                          label: item.label,\r\n                          value: ''\r\n                        };\r\n                        this.handleSingleDataChange(newValue, label, record.key)\r\n                      }}\r\n                      limit={{ size: 5, suffix: ['JPG', 'JPEG', 'PNG', 'GIF'] }}\r\n                      imgUrl={data && data.value || ''}\r\n                      showRemoveIcon={true}\r\n                    >\r\n                    </UploadSelect>\r\n                  </div>\r\n                );\r\n              } else {  // shop\r\n                return (\r\n                  // 添加图片禁用样式\r\n                  <div className={record.skuStatus=='0'?'image-diabled':''}>\r\n                    <UploadImage\r\n                      onChange={(result) => {\r\n                        let newValue = {\r\n                          label: item.label,\r\n                          value: result.logoUrl || ''\r\n                        };\r\n                        this.handleSingleDataChange(newValue, label, record.key)\r\n                      }}\r\n                      relation=\"logoUrl\"\r\n                      onRemove={(result) => {\r\n                        let newValue = {\r\n                          label: item.label,\r\n                          value: ''\r\n                        };\r\n                        this.handleSingleDataChange(newValue, label, record.key)\r\n                      }}\r\n                      imgType={['JPG', 'JPEG', 'PNG', 'GIF']}\r\n                      action=\"/proxy/base/upload/uploadImgLimitOneMega\"\r\n                      maxFileSize=\"500\"\r\n                      fileSizeType=\"KB\"\r\n                      imageUrl={data && data.value || ''}\r\n                    />\r\n                  </div>\r\n                );\r\n              }\r\n            } else if (item.type == 'file') {\r\n              const fileList = JSON.parse(data && data.value || JSON.stringify([]));\r\n              const disabled = (record.skuStatus == '0' || fileList.length >= 1)?true:false;\r\n              return (\r\n                <UploadFile\r\n                  fileLength = {1}\r\n                  disabled = {disabled} \r\n                  fileType = {['png','jpg','word','excel','pdf']}\r\n                  action = '/proxy/base/upload/uploadFileLimit'\r\n                  fileList = {fileList}\r\n                  onRemove = {(file) => {\r\n                    // 启用状态时，可删除\r\n                    if(record.skuStatus == '1'){\r\n                      let newValue = {\r\n                        label: item.label,\r\n                        value: JSON.stringify([])\r\n                      };\r\n                      this.handleSingleDataChange(newValue, label, record.key);\r\n                    } else if(record.skuStatus == '0'){\r\n                       // 停用状态不可删除\r\n                      return false;\r\n                    }\r\n                  }}\r\n                  onChange={(file) => {\r\n                    let newValue = {\r\n                      label: item.label,\r\n                      value: JSON.stringify([file])\r\n                    };\r\n                    this.handleSingleDataChange(newValue, label, record.key);\r\n                  }}\r\n                />\r\n              );\r\n            }\r\n          }\r\n        });\r\n      });\r\n    }\r\n\r\n    // 单位，店铺没有单位\r\n    if(props.skuUnit && props.type != '3'){\r\n      let that = this;\r\n      columns.push({\r\n        title: '单位',\r\n        dataIndex: 'skuUnit',\r\n        key: 'skuUnit',\r\n        width: 100,\r\n        render: (data, record) => {\r\n          return (\r\n            <Select\r\n              style={{ width: 80 }}\r\n              value={data}\r\n              disabled={record.skuStatus == '0' ? true : false}\r\n              onChange={(value) => { this.handleSingleDataChange(value, \"skuUnit\", record.key); }}\r\n            >\r\n              {\r\n                that.state.skuUnitDS.map((item) => {\r\n                  return <Select.Option value={item}>{item}</Select.Option>\r\n                })\r\n              }\r\n            </Select>\r\n          );\r\n        }\r\n      });\r\n    }\r\n\r\n    // 操作列，默认有该列\r\n    columns.push({\r\n      title: '操作',\r\n      dataIndex: 'skuStatus',\r\n      key: 'skuStatus',\r\n      width: 60,\r\n      render: (data, record) => {\r\n        // sku 状态,1:启用; 0:停用\r\n        return (\r\n          <a\r\n            href='javascript:void(0);'\r\n            className='a-link'\r\n            onClick={() => {\r\n              const newData = (data == '1')? 0:1;\r\n              this.handleSingleDataChange(newData, \"skuStatus\", record.key); \r\n            }}\r\n          >\r\n            {data == \"0\" ? \"启用\" : \"停用\"}\r\n          </a>\r\n        );\r\n      }\r\n    });\r\n\r\n    return columns;\r\n  }\r\n}\r\n\r\n\r\n\r\n","// 查询单位\r\nconst SKUUNIT_LOAD = 'SKUUNIT_LOAD';\r\nconst SKUUNIT_LOAD_SUCCESS = 'SKUUNIT_LOAD_SUCCESS';\r\nconst SKUUNIT_LOAD_FAIL = 'SKUUNIT_LOAD_FAIL';\r\n\r\nexport default function (state = { skuUnit_loaded: false }, action = {}) {\r\n    switch (action.type) {\r\n        case SKUUNIT_LOAD:\r\n            return {\r\n                ...state,\r\n                skuUnit_loading: true\r\n            };\r\n        case SKUUNIT_LOAD_SUCCESS:\r\n            return {\r\n                ...state,\r\n                data: action.result.data || [],\r\n                skuUnit_loading: false,\r\n                skuUnit_loaded: true\r\n            };\r\n        case SKUUNIT_LOAD_FAIL:\r\n            return {\r\n                ...state,\r\n                skuUnit_loading: false,\r\n                skuUnit_loaded: false,\r\n                skuUnit_error: action.error\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport function querySkuUnit(params, type) {\r\n    let url = '/item/seller/category/queryUnitByCategoryId';// shop\r\n    if (type == '0' || type == '1') {\r\n        url = '/item/platform/category/queryUnitByCategoryId'; // 运营平台\r\n    }\r\n    return {\r\n        types: [SKUUNIT_LOAD, SKUUNIT_LOAD_SUCCESS, SKUUNIT_LOAD_FAIL],\r\n        promise: (client) => client.get(url, { params: params })\r\n    };\r\n}\r\n\r\n","import { connect } from 'react-redux';\r\nimport skuUnitDS, { querySkuUnit } from './redux-SkuUnit';\r\nimport inject from \"../../../../redux/inject\";\r\nimport K from \"./ReleaseSaleInfo\";\r\n\r\n@inject({ skuUnitDS  })\r\n@connect(store => ({ skuUnitDS: store.skuUnitDS }), { querySkuUnit })\r\nexport default class BindReleaseSaleInfo extends K {}"],"sourceRoot":""}