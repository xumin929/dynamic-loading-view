(window.webpackJsonp=window.webpackJsonp||[]).push([[15,10,11],{1244:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,n=(l=a(1243))&&l.__esModule?l:{default:l};t.default=n.default,e.exports=t.default},1245:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,n=(l=a(1269))&&l.__esModule?l:{default:l};t.default=n.default,e.exports=t.default},1268:function(e,t,a){},1269:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=h(a(31)),n=h(a(959)),u=h(a(18)),i=h(a(6)),d=h(a(11)),r=h(a(5)),o=h(a(7)),s=h(a(229));a(62),a(958),a(228);var c=a(1),f=h(c);function h(e){return e&&e.__esModule?e:{default:e}}a(1268),s.default.config({top:300,duration:2});var m=!0,p=function(e){function t(e,a){(0,i.default)(this,t);var l=(0,r.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e,a));return l.beforeUpload=function(e){var t=l.props.maxFileSize,a=l.props.fileSizeType,n=l.props.imgType,u=!0,i=!0,d=e.name;if(n&&n.length>0){var r=d.split("."),o=r[r.length-1];o=o.toUpperCase(),-1===(n=n.map(function(e,t){return e.toUpperCase()})).indexOf(o)&&(i=!1)}return t&&e.size&&(u=!a||"M"!=a.toUpperCase()&&"MB"!=a.toUpperCase()?a&&"KB"==a.toUpperCase()?e.size<=1024*parseInt(t):a&&"B"==a.toUpperCase()?e.size<=parseInt(t):e.size<=1024*parseInt(t)*1024:e.size<=1024*parseInt(t)*1024),i?!!u||(a||(a="M"),s.default.error("上传图片的文件大小必须小于"+t+a+"!"),!1):(s.default.error("上传图片的文件格式有误!"),!1)},l.handleChange=function(e){if("uploading"===e.file.status&&(m&&s.default.loading("正在上传中，请稍等....",1),m=!1),"done"===e.file.status){m=!0;var t=e.file.response;if(t&&"0"==t.code){var a=t.data;l.setState({imageUrl:a});var n=l.props.relation,u=l.props.onChange;(i={})[n]=a,u(i)}else{var i;t&&"-1"==t.code?s.default.error(t.msg):s.default.error("上传失败！"),(0,l.props.onChange)(i={})}}"error"===e.file.status&&(m=!0,s.default.error("上传失败！"))},l.onRemove=function(){l.props.onRemove&&"function"==typeof l.props.onRemove&&l.props.onRemove({url:l.state.imageUrl}),l.setState({imageUrl:void 0})},l.state={imageUrl:e.imageUrl||""},l}return(0,o.default)(t,e),(0,d.default)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({imageUrl:e.imageUrl||""})}},{key:"render",value:function(){var e=this.props.style||{},t=this.props.action,a=this.props.data,u=this.props.name,i=this.state.imageUrl||"",d="upload-select-wrap "+(this.props.className||"");return i&&i.length>0&&(d+=" solid-border"),f.default.createElement("div",{className:d,style:e},i&&""!=i?f.default.createElement("div",{class:"upload-select-box"},f.default.createElement("img",{src:i}),f.default.createElement("div",{class:"upload-select-footer"},f.default.createElement(n.default,{name:u,showUploadList:!1,action:t,beforeUpload:this.beforeUpload.bind(this),onChange:this.handleChange.bind(this),data:a},f.default.createElement("div",{class:"upload-select-btn"},"重新上传")),f.default.createElement("div",{class:"upload-select-removebtn",onClick:this.onRemove},"删除"))):f.default.createElement(n.default,{name:u,showUploadList:!1,action:t,beforeUpload:this.beforeUpload.bind(this),onChange:this.handleChange.bind(this),data:a},f.default.createElement("div",{className:"upload-select-defaultbtn"},f.default.createElement(l.default,{type:"plus",className:"upload-plus"})," ",f.default.createElement("br",null),"上传图片")))}}]),t}(c.Component);t.default=p,e.exports=t.default},1370:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,n=(l=a(1442))&&l.__esModule?l:{default:l};t.default=n.default,e.exports=t.default},1439:function(e,t,a){},1440:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l,n,u=U(a(347)),i=U(a(1232)),d=U(a(1237)),r=U(a(951)),o=U(a(3)),s=U(a(1234)),c=U(a(155)),f=U(a(153)),h=U(a(18)),m=U(a(6)),p=U(a(11)),v=U(a(5)),g=U(a(7)),k=U(a(948));a(348),a(1231),a(1236),a(333),a(1233),a(216),a(949);var C=a(1),S=U(C),b=a(796),E=U(a(1245)),y=U(a(1244));function U(e){return e&&e.__esModule?e:{default:e}}a(1439);var w=k.default.Group,N=(l=function(e){function t(e){(0,m.default)(this,t);var a=(0,v.default)(this,(t.__proto__||(0,h.default)(t)).call(this,e));n.call(a),a.defaultDataSource=[{key:0,attributes:null,skuStatus:1}];var l=a.initColumns(e),u=JSON.parse((0,f.default)(e.itemTmplPublishVo||{})),i=JSON.parse((0,f.default)(u.itemTmplSkuVoList||[]));return i=a.setDataSourceKey(i),a.state={skuUnitDS:e.skuUnitDS.data||[],wholeColumnData:{},columns:l,dataSource:i.length>0?i:a.defaultDataSource,selectedRowKeys:[]},a.cid=u.cid||void 0,a}return(0,g.default)(t,e),(0,p.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.itemTmplPublishVo&&e.itemTmplPublishVo.cid||void 0,a=this.props.type||void 0;e.skuUnit&&"3"!=e.type&&t&&this.cid!=t&&(this.cid=t,e.querySkuUnit({cid:e.itemTmplPublishVo.cid},a));var l=this.initColumns(e),n=JSON.parse((0,f.default)(e.itemTmplPublishVo||{})),u=JSON.parse((0,f.default)(n.itemTmplSkuVoList||[]));u=this.setDataSourceKey(u),this.setState({skuUnitDS:e.skuUnitDS.data||[],columns:l,dataSource:u.length>0?u:this.defaultDataSource})}},{key:"componentDidMount",value:function(){var e=this.props.itemTmplPublishVo&&this.props.itemTmplPublishVo.cid||void 0,t=this.props.type||void 0;this.props.skuUnit&&"3"!=this.props.type&&e&&this.props.querySkuUnit({cid:this.props.itemTmplPublishVo.cid},t)}},{key:"render",value:function(){var e=this,t={selectedRowKeys:this.state.selectedRowKeys,onChange:this.onSelectChange};return[S.default.createElement("h3",{className:"h3-title"},"销售信息"),S.default.createElement("div",{className:"btn-group-horizontal"},S.default.createElement(c.default,{onClick:this.handleCheckAll},"全选"),S.default.createElement(c.default,{onClick:this.handleReverseCheck},"反选"),S.default.createElement(c.default,{onClick:function(){e.handleMultiEnablOrDisabled(0)}},"批量停用"),S.default.createElement(c.default,{onClick:function(){e.handleMultiEnablOrDisabled(1)}},"批量启用")),S.default.createElement("div",{className:"table-bordered"},S.default.createElement(s.default,{rowSelection:t,columns:this.state.columns,dataSource:this.state.dataSource,pagination:!1,scroll:{x:!0,y:400}}))]}}]),t}(C.Component),n=function(){var e=this;this.setDataSourceKey=function(e){var t=[];return e.forEach(function(e,a){t.push((0,o.default)({},e,{key:a}))}),t},this.onSelectChange=function(t){e.setState({selectedRowKeys:t})},this.handleCheckAll=function(){for(var t=e.state.dataSource,a=[],l=0;l<t.length;l++)a.push(l);e.setState({selectedRowKeys:a})},this.handleReverseCheck=function(){for(var t=e.state,a=t.dataSource,l=t.selectedRowKeys,n=[],u=0;u<a.length;u++)n.push(u);var i=n.filter(function(e){return!l.includes(e)});e.setState({selectedRowKeys:i})},this.handleMultiEnablOrDisabled=function(t){var a=e.state.selectedRowKeys,l=JSON.parse((0,f.default)(e.state.dataSource));a.forEach(function(e){l[e].skuStatus=t});var n=JSON.parse((0,f.default)(e.props.itemTmplPublishVo));n.itemTmplSkuVoList=l,e.props.updateItemTmplAction(n)},this.handleSingleDataChange=function(t,a,l){var n=JSON.parse((0,f.default)(e.state.dataSource));if(n[l][a]=t,"weightUnit"==a){var u=n[l].weight;"g"==t?n[l].weight=1e3*u:(t="kg")&&(n[l].weight=u/1e3)}var i=JSON.parse((0,f.default)(e.props.itemTmplPublishVo));i.itemTmplSkuVoList=n,e.props.updateItemTmplAction(i)},this.handleWholeColumnChange=function(t){var a=JSON.parse((0,f.default)(e.state.dataSource));t.forEach(function(t){var l=e.state.wholeColumnData[t];"string"!=typeof l&&"number"!=typeof l||a.forEach(function(e){"1"==e.skuStatus&&(e[t]=l)})});var l=JSON.parse((0,f.default)(e.props.itemTmplPublishVo));l.itemTmplSkuVoList=a,e.props.updateItemTmplAction(l)},this.storeWholeInputData=function(t,a){e.setState(function(e){var l=JSON.parse((0,f.default)(e.wholeColumnData));return l[a]=t,{wholeColumnData:l}})},this.onRemoveFile=function(e){console.log("file-----",e)},this.initColumns=function(t){var a=[{title:"商品信息",dataIndex:"attributes",key:"attributes",width:200,render:function(e){var t="";return(e||[]).forEach(function(e){t+=e.vName+" "}),S.default.createElement("span",null,t)}}];if(t.modelCode){var l=S.default.createElement("div",null,S.default.createElement("label",null,"型号"),S.default.createElement(r.default,{className:"inline-input",onChange:function(t){e.storeWholeInputData(t.target.value,"modelCode")}}),S.default.createElement("a",{href:"javascript:void(0)",className:"a-link",onClick:function(){e.handleWholeColumnChange(["modelCode"])}},"设置")),n=S.default.createElement("div",null,S.default.createElement("label",{className:"inline-label"},"型号"),S.default.createElement(d.default,{content:l},S.default.createElement("a",{href:"javascript:void(0)",className:"a-link"},"设置全部")));a.push({title:n,dataIndex:"modelCode",key:"modelCode",width:150,render:function(t,a){return S.default.createElement(r.default,{value:t,disabled:"0"==a.skuStatus,onChange:function(t){e.handleSingleDataChange(t.target.value,"modelCode",a.key)}})}})}if(t.productCode){var o=S.default.createElement("div",null,S.default.createElement("label",null,"物料号"),S.default.createElement(r.default,{className:"inline-input",onChange:function(t){e.storeWholeInputData(t.target.value,"productCode")}}),S.default.createElement("a",{href:"javascript:void(0)",className:"a-link",onClick:function(){e.handleWholeColumnChange(["productCode"])}},"设置")),s=S.default.createElement("div",null,S.default.createElement("label",{className:"inline-label"},"物料号"),S.default.createElement(d.default,{content:o},S.default.createElement("a",{href:"javascript:void(0)",className:"a-link"},"设置全部")));a.push({title:s,dataIndex:"productCode",key:"productCode",width:150,render:function(t,a){return S.default.createElement(r.default,{value:t,disabled:"0"==a.skuStatus,onChange:function(t){e.handleSingleDataChange(t.target.value,"productCode",a.key)}})}})}if(t.modelCode){var c=S.default.createElement("div",null,S.default.createElement("label",null,"商品条码"),S.default.createElement(r.default,{className:"inline-input",onChange:function(t){e.storeWholeInputData(t.target.value,"barCode")}}),S.default.createElement("a",{href:"javascript:void(0)",className:"a-link",onClick:function(){e.handleWholeColumnChange(["barCode"])}},"设置")),h=S.default.createElement("div",null,S.default.createElement("label",{className:"inline-label"},"商品条码"),S.default.createElement(d.default,{content:c},S.default.createElement("a",{href:"javascript:void(0)",className:"a-link"},"设置全部")));a.push({title:h,dataIndex:"barCode",key:"barCode",width:150,render:function(t,a){return S.default.createElement(r.default,{value:t,disabled:"0"==a.skuStatus,onChange:function(t){e.handleSingleDataChange(t.target.value,"barCode",a.key)}})}})}if(t.modelCode){var m=S.default.createElement("div",null,S.default.createElement("label",null,"商品毛重"),S.default.createElement(i.default,{min:0,className:"inline-input-number",onChange:function(t){e.storeWholeInputData(t,"weight")}}),S.default.createElement(w,{defaultValue:"g",onChange:function(t){e.storeWholeInputData(t.target.value,"weightUnit")}},S.default.createElement(k.default,{value:"g"},"g"),S.default.createElement(k.default,{value:"kg"},"kg")),S.default.createElement("a",{href:"javascript:void(0)",className:"a-link",onClick:function(){e.handleWholeColumnChange(["weight","weightUnit"])}},"设置")),p=S.default.createElement("div",null,S.default.createElement("label",{className:"inline-label"},"商品毛重"),S.default.createElement(d.default,{content:m},S.default.createElement("a",{href:"javascript:void(0)",className:"a-link"},"设置全部")));a.push({title:p,dataIndex:"weight",key:"weight",colSpan:2,width:90,render:function(t,a){return S.default.createElement(i.default,{min:0,value:t,disabled:"0"==a.skuStatus,className:"inline-input-number",onChange:function(t){e.handleSingleDataChange(t,"weight",a.key)}})}}),a.push({title:"",dataIndex:"weightUnit",key:"weightUnit",colSpan:0,width:70,render:function(t,a){var l=t||"g";return S.default.createElement(u.default,{value:l,disabled:"0"==a.skuStatus,onChange:function(t){e.handleSingleDataChange(t,"weightUnit",a.key)}},S.default.createElement(u.default.Option,{value:"g"},"g"),S.default.createElement(u.default.Option,{value:"kg"},"kg"))}})}if(t.size){var v=S.default.createElement("div",null,S.default.createElement("label",null,"包装尺寸（mm） "),"  长:",S.default.createElement(i.default,{min:0,className:"inline-input-number",onChange:function(t){e.storeWholeInputData(t,"length")}}),"  宽:",S.default.createElement(i.default,{min:0,className:"inline-input-number",onChange:function(t){e.storeWholeInputData(t,"width")}}),"  高:",S.default.createElement(i.default,{min:0,className:"inline-input-number",onChange:function(t){e.storeWholeInputData(t,"height")}}),S.default.createElement("a",{href:"javascript:void(0)",className:"a-link",onClick:function(){e.handleWholeColumnChange(["length","width","height"])}},"设置")),g=S.default.createElement("div",null,S.default.createElement("label",{className:"inline-label"},"包装尺寸（mm）"),S.default.createElement(d.default,{content:v},S.default.createElement("a",{href:"javascript:void(0)",className:"a-link"},"设置全部")));a.push({title:g,dataIndex:"length",key:"length",colSpan:3,width:110,render:function(t,a){return S.default.createElement("div",null,"长:",S.default.createElement(i.default,{min:0,value:t,disabled:"0"==a.skuStatus,className:"inline-input-number",onChange:function(t){e.handleSingleDataChange(t,"length",a.key)}}))}}),a.push({dataIndex:"width",key:"width",colSpan:0,width:110,render:function(t,a){return S.default.createElement("div",null,"宽:",S.default.createElement(i.default,{min:0,value:t,disabled:"0"==a.skuStatus,className:"inline-input-number",onChange:function(t){e.handleSingleDataChange(t,"width",a.key)}}))}}),a.push({dataIndex:"height",key:"height",colSpan:0,width:110,render:function(t,a){return S.default.createElement("div",null,"高:",S.default.createElement(i.default,{min:0,value:t,disabled:"0"==a.skuStatus,className:"inline-input-number",onChange:function(t){e.handleSingleDataChange(t,"height",a.key)}}))}})}if(t.extendColumnFields&&t.extendColumnFields instanceof Array&&t.extendColumnFields.length>0&&t.extendColumnFields.forEach(function(l){var n="extendSkuFields_"+l.label;a.push({title:l.labelName,dataIndex:n,key:n,width:l.width||120,render:function(a,u){if("input"==l.type)return S.default.createElement(r.default,{value:a&&a.value||"",disabled:"0"==u.skuStatus,onChange:function(t){var a={label:l.label,value:t.target.value};e.handleSingleDataChange(a,n,u.key)}});if("image"==l.type)return"0"==t.type||"1"==t.type?S.default.createElement("div",{className:"0"==u.skuStatus?"image-diabled":""},S.default.createElement(b.UploadSelect,{onChange:function(t){var a={label:l.label,value:t.url||""};e.handleSingleDataChange(a,n,u.key)},onRemove:function(t){var a={label:l.label,value:""};e.handleSingleDataChange(a,n,u.key)},limit:{size:5,suffix:["JPG","JPEG","PNG","GIF"]},imgUrl:a&&a.value||"",showRemoveIcon:!0})):S.default.createElement("div",{className:"0"==u.skuStatus?"image-diabled":""},S.default.createElement(E.default,{onChange:function(t){var a={label:l.label,value:t.logoUrl||""};e.handleSingleDataChange(a,n,u.key)},relation:"logoUrl",onRemove:function(t){var a={label:l.label,value:""};e.handleSingleDataChange(a,n,u.key)},imgType:["JPG","JPEG","PNG","GIF"],action:"/proxy/base/upload/uploadImgLimitOneMega",maxFileSize:"500",fileSizeType:"KB",imageUrl:a&&a.value||""}));if("file"==l.type){var i=JSON.parse(a&&a.value||(0,f.default)([])),d="0"==u.skuStatus||i.length>=1;return S.default.createElement(y.default,{fileLength:1,disabled:d,fileType:["png","jpg","word","excel","pdf"],action:"/proxy/base/upload/uploadFileLimit",fileList:i,onRemove:function(t){if("1"==u.skuStatus){var a={label:l.label,value:(0,f.default)([])};e.handleSingleDataChange(a,n,u.key)}else if("0"==u.skuStatus)return!1},onChange:function(t){var a={label:l.label,value:(0,f.default)([t])};e.handleSingleDataChange(a,n,u.key)}})}}})}),t.skuUnit&&"3"!=t.type){var C=e;a.push({title:"单位",dataIndex:"skuUnit",key:"skuUnit",width:100,render:function(t,a){return S.default.createElement(u.default,{style:{width:80},value:t,disabled:"0"==a.skuStatus,onChange:function(t){e.handleSingleDataChange(t,"skuUnit",a.key)}},C.state.skuUnitDS.map(function(e){return S.default.createElement(u.default.Option,{value:e},e)}))}})}return a.push({title:"操作",dataIndex:"skuStatus",key:"skuStatus",width:60,render:function(t,a){return S.default.createElement("a",{href:"javascript:void(0);",className:"a-link",onClick:function(){var l="1"==t?0:1;e.handleSingleDataChange(l,"skuStatus",a.key)}},"0"==t?"启用":"停用")}}),a}},l);t.default=N,e.exports=t.default},1441:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,n=(l=a(3))&&l.__esModule?l:{default:l};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{skuUnit_loaded:!1},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case u:return(0,n.default)({},e,{skuUnit_loading:!0});case i:return(0,n.default)({},e,{data:t.result.data||[],skuUnit_loading:!1,skuUnit_loaded:!0});case d:return(0,n.default)({},e,{skuUnit_loading:!1,skuUnit_loaded:!1,skuUnit_error:t.error});default:return e}},t.querySkuUnit=function(e,t){var a="/item/seller/category/queryUnitByCategoryId";return"0"!=t&&"1"!=t||(a="/item/platform/category/queryUnitByCategoryId"),{types:[u,i,d],promise:function(t){return t.get(a,{params:e})}}};var u="SKUUNIT_LOAD",i="SKUUNIT_LOAD_SUCCESS",d="SKUUNIT_LOAD_FAIL"},1442:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l,n=h(a(18)),u=h(a(6)),i=h(a(5)),d=h(a(7)),r=a(88),o=a(1441),s=h(o),c=h(a(1229)),f=h(a(1440));function h(e){return e&&e.__esModule?e:{default:e}}var m=(0,c.default)({skuUnitDS:s.default})(l=(0,r.connect)(function(e){return{skuUnitDS:e.skuUnitDS}},{querySkuUnit:o.querySkuUnit})(l=function(e){function t(){return(0,u.default)(this,t),(0,i.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,d.default)(t,e),t}(f.default))||l)||l;t.default=m,e.exports=t.default}}]);
//# sourceMappingURL=15-167e9b631355aff8c98a.js.map