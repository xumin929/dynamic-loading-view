(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{1369:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,u=(r=a(1437))&&r.__esModule?r:{default:r};e.default=u.default,t.exports=e.default},1434:function(t,e,a){},1435:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,u=(r=a(153))&&r.__esModule?r:{default:r};e.default=function(t,e){var a=function(t){var e,a,r,u,n=[];return t.forEach(function(t){var e=[];t.platformCategoryAttributeValues.forEach(function(a){if(a.checked){var r={aid:t.attrId,aName:t.attrName,vid:a.attrValueId,vName:a.attrValueName};e.push(r)}}),e.length>0&&n.push(e)}),a=(e=n).length,r=[],u={},function t(n){if(!(++n>a-1))for(u[n]||(u[n]=0),e[n]instanceof Array||(e[n]=[e[n]]),u[n]=0;u[n]<e[n].length;u[n]++)if(t(n),n==a-1){for(var i=[],f=a-1;f>=0;f--)e[n-f]instanceof Array||(e[n-f]=[e[n-f]]),i.push(e[n-f][u[n-f]]);r.push(i)}}(-1),r}(e),r=[];t.forEach(function(t){r.push(t.attributes||[])});var n=[];return a.forEach(function(e,i){var f=function(t,e){var a=-1;return t.length>0&&t.length>0&&t.map(function(t,r){(0,u.default)(t)==(0,u.default)(e)&&(a=r)}),a}(r,e);f>=0?n.push(t[f]):n.push({attributes:a[i],url:"",alt:""})}),n},t.exports=e.default},1436:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,u=(r=a(3))&&r.__esModule?r:{default:r};function n(t){var e=[];return t.forEach(function(t){var a=[];t.forEach(function(t){a.push(t.aid+"_"+t.vid)}),e.push(a.sort().toString())}),e}e.default=function(t,e){var a=function(t){var e,a,r,u,n=[];return t.forEach(function(t){var e=[];t.platformCategoryAttributeValues.forEach(function(a){if(a.checked){var r={aid:t.attrId,aName:t.attrName,vid:a.attrValueId,vName:a.attrValueName};e.push(r)}}),e.length>0&&n.push(e)}),a=(e=n).length,r=[],u={},function t(n){if(!(++n>a-1))for(u[n]||(u[n]=0),e[n]instanceof Array||(e[n]=[e[n]]),u[n]=0;u[n]<e[n].length;u[n]++)if(t(n),n==a-1){for(var i=[],f=a-1;f>=0;f--)e[n-f]instanceof Array||(e[n-f]=[e[n-f]]),i.push(e[n-f][u[n-f]]);r.push(i)}}(-1),r}(e),r=[];t.forEach(function(t){r.push(t.attributes||[])});var i=n(a),f=n(r),o=[];return i.forEach(function(e,r){var n=f.indexOf(e);if(n>=0)o.push((0,u.default)({},t[n],{key:r}));else{var i=(a[r]||[]).map(function(t){return{aid:t.aid,vid:t.vid,desc:""}});o.push({specAttributes:i,attributes:a[r],skuStatus:1,key:r})}}),o.length<=0&&o.push({specAttributes:null,attributes:null,skuStatus:1,key:0}),o},t.exports=e.default},1437:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,u,n=k(a(229)),i=k(a(153)),f=k(a(1234)),o=k(a(947)),l=k(a(3)),s=k(a(18)),d=k(a(6)),c=k(a(11)),h=k(a(5)),p=k(a(7));a(228),a(1233),a(950);var v=a(1),m=k(v),b=k(a(1436)),g=k(a(1435));function k(t){return t&&t.__esModule?t:{default:t}}a(1434);var A=(r=function(t){function e(t){(0,d.default)(this,e);var a=(0,h.default)(this,(e.__proto__||(0,s.default)(e)).call(this,t));u.call(a);var r=a.getInitStateData(t);return a.state=(0,l.default)({},r),a}return(0,p.default)(e,t),(0,c.default)(e,[{key:"componentWillReceiveProps",value:function(t){var e=this.getInitStateData(t);this.setState((0,l.default)({},e))}},{key:"getDisabledAttrIds",value:function(t){var e=[];return t.forEach(function(t){var a=!1;t.platformCategoryAttributeValues.forEach(function(t){if(t.checked)return a=!0,!1}),a||e.push(t.attrId)}),e}},{key:"render",value:function(){var t=this,e=[{title:"属性名称",dataIndex:"attrName",key:"attrName",width:200},{title:"属性值",key:"attrValue",render:function(e,a){return a.platformCategoryAttributeValues.map(function(e){var r=t.state,u=r.disabledAttrIds,n=void 0===u?[]:u,i=r.ifSave,f=void 0===i||i,l=n.indexOf(a.attrId),s=!f&&l>=0;return m.default.createElement(o.default,{value:e,onChange:t.onChange,checked:e.checked,disabled:s},e.attrValueName)})}}];return[m.default.createElement("h3",{className:"h3-title"},"销售规格"),m.default.createElement("div",{className:"table-bordered"},m.default.createElement(f.default,{columns:e,dataSource:this.state.saleAttributeData,pagination:!1}))]}}]),e}(v.Component),u=function(){var t=this;this.getInitStateData=function(e){var a=e.saleAttributeData||[],r=JSON.parse((0,i.default)(a)),u={ifSave:e.ifSave,saleAttributeData:r};return e.ifSave||(u.disabledAttrIds=t.getDisabledAttrIds(r)),u.checkedAttrIds=t.getCheckedAttrIds(r),u},this.getCheckedAttrIds=function(t){var e=[];return t.forEach(function(t){var a=!1;t.platformCategoryAttributeValues.forEach(function(t){t.checked&&(a=!0)}),a&&e.push(t.attrId)}),e},this.onChange=function(e){var a=e.target.value,r=e.target.checked,u=JSON.parse((0,i.default)(t.state.checkedAttrIds));if(r&&u.indexOf(a.attrId)<0){if(u.length>=3)return void n.default.error("只能选择三种属性信息");u.push(a.attrId),t.setState({checkedAttrIds:u})}var f=JSON.parse((0,i.default)(t.props.saleAttributeData));f.forEach(function(e){if(e.attrId==a.attrId){if(!t.state.ifSave&&!r&&e.platformCategoryAttributeValues.filter(function(t){return 1==t.checked}).length<=1)return void n.default.error("至少要保留一种属性信息");e.platformCategoryAttributeValues.forEach(function(t){t.attrValueId==a.attrValueId&&(t.checked=r)})}}),t.props.updateSaleAttributeAction(f);var o=JSON.parse((0,i.default)(t.props.itemTmplPublishVo)),l=JSON.parse((0,i.default)(o.itemTmplSkuVoList)),s=(0,b.default)(l,f);o.itemTmplSkuVoList=s;var d=t.props.itemTmplPublishVo.itemSkuPicVoList,c=(0,g.default)(d,f);o.itemSkuPicVoList=c,t.props.updateItemTmplAction(o)}},r);e.default=A,t.exports=e.default}}]);
//# sourceMappingURL=14-d6af6ca56f93b8d9df5a.js.map